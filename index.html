<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>LARA AR PRO</title>
<style>
body {
    margin:0;
    font-family: Arial, sans-serif;
    background: linear-gradient(135deg,#0f2027,#203a43,#2c5364);
    color:white;
    display:flex;
    justify-content:center;
    align-items:center;
    height:100vh;
}

.card {
    background: rgba(255,255,255,0.1);
    padding:40px;
    border-radius:20px;
    backdrop-filter: blur(10px);
    box-shadow: 0 0 20px rgba(0,0,0,0.3);
    text-align:center;
    width:400px;
}

.big {
    font-size:60px;
    font-weight:bold;
}

.red { color:#ff4d4d; }
.orange { color:#ffa500; }
.green { color:#00ff99; }
</style>
</head>
<body>

<div class="card">
    <h2>LARA AR PRO KPI</h2>
    <div id="percent" class="big">0%</div>
    <p>Aylık Hedef: 700.000 TL</p>
    <p id="ciro">Ciro: 0 TL</p>
</div>

<script>
let hedef = 700000;

let csvUrl = "https://docs.google.com/spreadsheets/d/e/2PACX-1vTVbT6LOgyqCLieriT6raGk1ZEf5SrlvQcHaPi6bKzlk-XdsdgypBFkgRdYo3nJPEROYFE5_oy72w/pub?output=csv";

fetch(csvUrl)
  .then(response => response.text())
  .then(data => {

    let rows = data.trim().split("\n");

    // Son dolu satırı al
    let lastRow = rows[rows.length - 1].split(",");

    let ciro = parseFloat(lastRow[1]);

    if (isNaN(ciro)) {
        ciro = 0;
    }

    let oran = Math.round((ciro / hedef) * 100);

    let percentEl = document.getElementById("percent");
    let ciroEl = document.getElementById("ciro");

    percentEl.innerText = oran + "%";
    ciroEl.innerText = "Ciro: " + ciro.toLocaleString("tr-TR") + " TL";

    percentEl.classList.remove("red","orange","green");

    if(oran < 50){
        percentEl.classList.add("red");
    } else if(oran < 80){
        percentEl.classList.add("orange");
    } else {
        percentEl.classList.add("green");
    }

});
</script>



</body>
</html>
